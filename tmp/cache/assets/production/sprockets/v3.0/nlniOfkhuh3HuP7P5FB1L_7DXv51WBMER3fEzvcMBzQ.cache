I"‰	(function() {
  var closest_server, declare_closest_server, gamerist_serverdata, ping, request_image;

  gamerist_serverdata = {
    "servers": [
      {
        "name": "trivulum",
        "location": "51.570699, -0.222105",
        "ping": "217.163.10.202"
      }, {
        "name": "alturus",
        "location": "33.468601, -112.090616",
        "ping": "8.3.5.149"
      }, {
        "name": "reilian",
        "location": "-31.955341, 115.856660",
        "ping": "173.199.81.55"
      }
    ]
  };

  request_image = function(url) {
    return new Promise(function(resolve, reject) {
      var img;
      img = new Image;
      img.onload = function() {
        resolve(img);
      };
      img.onerror = function() {
        reject(url);
      };
      img.src = url + '?random-no-cache=' + Math.floor((1 + Math.random()) * 0x10000).toString(16);
    });
  };

  ping = function(url) {
    return new Promise(function(resolve, reject) {
      var response, start;
      start = (new Date).getTime();
      response = function() {
        var delta;
        delta = (new Date).getTime() - start;
        delta /= 4;
        resolve(delta);
      };
      request_image(url).then(response)["catch"](response);
      setTimeout((function() {
        reject(Error('Timeout'));
      }), 5000);
    });
  };

  closest_server = null;

  declare_closest_server = function(ip, name) {
    return ping("http://" + ip).then(function(v) {
      if (closest_server === null) {
        closest_server = name;
        return console.log("Closest server is " + name + " at " + ip);
      }
    });
  };

  $(document).ready(function() {
    $("input").parents("#room_playercount label").each(function() {
      return $(this).css("background-color", "hsl(65,50%,50%)");
    });
    $("[checked='checked']").parents("#room_playercount label").each(function() {
      return $(this).css("background-color", "hsl(65,100%,50%)");
    });
    $(".field_bigradio").on('change', function(e) {
      console.log("changed to " + e.target.value);
      $(this).children(".bigradiobutton").each(function() {
        return $(this).css("background-color", "hsl(65,50%,50%)");
      });
      return $(e.target).parent().css("background-color", "hsl(65,100%,50%)");
    });
    declare_closest_server("tesco.co.uk", "london");
    declare_closest_server("ytv.ca", "francisco");
    return declare_closest_server("abc.com.au", "sydney");
  });

}).call(this);
:ET